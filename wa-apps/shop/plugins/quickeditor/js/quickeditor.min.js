(function(b){b(function(){b.QuickEditor={settings:{},strings:{},init:function(a,c){b.QuickEditor.scroolWindowToStartLocation();"undefined"===typeof a||"undefined"===typeof c?console.error("QuickEditor error: plugin settings are not found on this page. Check existence of the frontend_footer hook in the current design theme."):(b.QuickEditor.settings=a,b.QuickEditor.strings=c);a&&"undefined"!==typeof a.page_id&&b.QuickEditor.addPageEditButton(parseInt(a.page_id));a&&"hidden"!==a.quick_access_location&&
b.QuickEditor.addQuickAccessButton()},scroolWindowToStartLocation:function(){if("function"===typeof b.cookie&&b.cookie("quickeditor_wnd_pos")&&0<b.cookie("quickeditor_wnd_pos")){var a=parseInt(b.cookie("quickeditor_wnd_pos"));window.scrollTo(0,a);b.cookie("quickeditor_wnd_pos",0)}},showEditPageDialog:function(a){b.QuickEditor.showEditDialog(a,"page")},showEditCategoryDialog:function(a){b.QuickEditor.showEditDialog(a,"category")},showEditProductDialog:function(a){b.QuickEditor.showEditDialog(a,"product")},
showEditDialog:function(a,c){var d="",e="",e=screen.width-200,f=screen.height-200,g=(screen.width-e)/2,h=(screen.height-f)/2;b.QuickEditor.settings.tab_window||(d="scrollbars=yes,toolbar=no,directories=no,top="+h+",left="+g+",width="+e+",height="+f+",resizable=yes,status=no");switch(c){case "page":e="shop/?action=storefronts#/pages/"+a;break;case "category":e="shop/?action=products#/products/category_id="+a;break;case "plugins":e="shop/?action=plugins";break;case "settings":e="shop/?action=settings";
break;case "orders":e="shop/?action=orders#/orders/";break;case "customers":e="shop/?action=customers";break;case "reports":e="shop/?action=reports";break;case "products":e="shop/?action=products#/products/view=table&sort=create_datetime&order=desc";break;case "storefronts":e="shop/?action=storefronts";break;default:e="shop/?action=products#/product/"+a+(b.QuickEditor.settings.always_edit_page?"/edit/":"")}d=window.open(b.QuickEditor.settings.wa_backend_url+e,"",d);b.QuickEditor.injectButtons(d,c)},
injectButtons:function(a,c){switch(c){case "product":var d=setInterval(function(){0<b("#s-product-edit-save-panel",a.document).length&&(b(a.document.head).append('<link rel="stylesheet" type="text/css" href="'+b.QuickEditor.settings.plugin_static_url+'css/hide.css">'),b.QuickEditor.settings.show_description&&(b(".s-product-form.descriptions",a.document).css({display:"block"}),a.jQuery.product.editTabDescriptionsAction()),b("#s-product-edit-save-panel .block.bordered-top",a.document).append('<input id="quickeditor-save-update" type="button" value="'+
b.QuickEditor.strings.str_save_update+'" class="button green" style="margin-right: 10px;">'),a.jQuery("#quickeditor-save-update").click(function(){a.jQuery.product.saveData("profile",null,function(){b.QuickEditor.closeAndReload(a,!0)})}),b.QuickEditor.settings.save_and_close&&(b("#s-product-edit-save-panel .block.bordered-top",a.document).append('<input id="quickeditor-save-close" type="button" value="'+b.QuickEditor.strings.str_save_and_close+'" class="button green">'),a.jQuery("#quickeditor-save-close").click(function(){a.jQuery.product.saveData("profile",
null,function(){b.QuickEditor.closeAndReload(a,!1)})})),clearInterval(d))},10);break;case "page":d=setInterval(function(){0<b(".wa-page-save-panel",a.document).length&&(b(a.document.head).append('<link rel="stylesheet" type="text/css" href="'+b.QuickEditor.settings.plugin_static_url+'css/hide.css">'),b(".wa-page-save-panel",a.document).append('<input id="quickeditor-save-update" type="button" value="'+b.QuickEditor.strings.str_save_update+'" class="button green" style="margin-right: 10px;">'),a.jQuery("#quickeditor-save-update").click(function(){a.jQuery("#wa-page-content").waEditor("sync");
a.jQuery("#wa-editor-status").html("<i class='icon16 loading'></i> Saving...").fadeIn("slow");a.jQuery.post(a.jQuery("#wa-page-form").attr("action"),a.jQuery("#wa-page-form").serialize(),function(c){"ok"===c.status&&b.QuickEditor.closeAndReload(a,!0)})}),b.QuickEditor.settings.save_and_close&&(b(".wa-page-save-panel",a.document).append('<input id="quickeditor-save-close" type="button" value="'+b.QuickEditor.strings.str_save_and_close+'" class="button green">'),a.jQuery("#quickeditor-save-close").click(function(){a.jQuery("#wa-page-content").waEditor("sync");
a.jQuery("#wa-editor-status").html("<i class='icon16 loading'></i> Saving...").fadeIn("slow");a.jQuery.post(a.jQuery("#wa-page-form").attr("action"),a.jQuery("#wa-page-form").serialize(),function(c){"ok"===c.status&&b.QuickEditor.closeAndReload(a,!1)})})),clearInterval(d))},10)}},closeAndReload:function(a,c){"function"===typeof b.cookie&&b.cookie("quickeditor_wnd_pos",b(window).scrollTop());a.close();c&&location.reload(!0)},addPageEditButton:function(a){var c=b("<div></div>");c.addClass("quickeditor-fixed-link");
"right"===b.QuickEditor.settings.page_link_location&&c.addClass("quickeditor-fixed-link-right");var d=b("<i></i>");d.addClass("icon-quickeditor-list");c.append(d);c.attr("title",b.QuickEditor.strings.str_edit_page);c.click(function(){b.QuickEditor.showEditPageDialog(a)});b("body").prepend(c)},qaMenuItems:"settings plugins orders products customers reports storefronts".split(" "),addQuickAccessButton:function(){var a=b("<div></div>");a.addClass("quickeditor-fixed-link");a.css({"margin-top":"50px"});
"right"===b.QuickEditor.settings.quick_access_location&&a.addClass("quickeditor-fixed-link-right");var c=b("<i></i>");c.addClass("icon-quickeditor-sitemap");c.click(function(){b.QuickEditor.showEditDialog(null,"orders")});var d=b("<ul></ul>");d.addClass("quickeditor-qa-menu");"right"===b.QuickEditor.settings.quick_access_location&&d.addClass("quickeditor-qamenu-right");d=b.QuickEditor.getQaMenuItem(d);a.append(c);a.append(d);a.attr("title",b.QuickEditor.strings.str_quick_access);a.hover(function(){d.show()},
function(){d.hide()});b("body").prepend(a)},getQaMenuItem:function(a){var c=null;b.each(b.QuickEditor.qaMenuItems,function(d,e){c=b("<li></li>");c.append('<i class="icon-quickeditor-qamenu-'+e+'"></i>');c.append(b.QuickEditor.strings["str_"+e]);c.click(function(){a.hide();b.QuickEditor.showEditDialog(null,e)});a.append(c)});return a}}})})(jQuery);
