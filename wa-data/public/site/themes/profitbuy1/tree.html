{$tree = null}
{$selected_category = null}
{$tree_title = "[`Information`]"}
{if $theme_settings.content_nav == 'shop_category'}
    {if $wa->shop}
        {$tree = $wa->shop->categories(0, null, true)}
        {$tree_title = "[`Categories`]"}
        {if $tree}
            {if isset($category) && $wa_app == 'shop'}{$selected_category = $category.id}{/if}
            {if isset($product) && $product.categories}
                {$selected_category = $product.categories}
                {$selected_category = current($selected_category)}
                {$selected_category = $selected_category.id}
            {/if}
        {/if}
    {/if}
{elseif $theme_settings.content_nav == 'site_pages'}
    {$tree = $wa->site->pages()}
    {if $wa_app == 'site' && isset($page.id)}
        {$selected_category = $page.id}
    {/if}
{elseif $theme_settings.content_nav == 'shop_pages'}
    {$tree = $wa->shop->pages()}
    {if $wa_app == 'shop'}
        {$selected_category = $wa->param('page_id')}
    {/if}
{/if}

<nav class="tree-wrapper{if $theme_settings.content_nav != 'shop_category'} margin-bottom{/if}">
    {if $tree}
        {$tree_type = $theme_settings.category_tree_type|default:'type1'}
        <div class="container">
            <div class="tree-title">{$tree_title}<button class="toggle-menu"><i class="mdi-menu mdi-2x"></i></button></div>
            <div class="sidebar-box">
                {wa_print_tree tree=$tree selected=$selected_category unfolded=true class="base-menu `$tree_type` tree r-cat" collapsible_class='parent' elem ='<a href=":url" data-icon-id=":id">:name</a>'}
            </div>
        </div>
    {else}
        &nbsp;
    {/if}
</nav>